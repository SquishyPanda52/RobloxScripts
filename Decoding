-- CONFIG
local EMOTE_ID = "71302743123422"
local EMOTE_DURATION = 5 -- seconds

-- CLEANUP if rerun
if getgenv().DanceUI then
    getgenv().DanceUI:Destroy()
    getgenv().DanceUI = nil
end
if getgenv().DanceButtonConn then
    getgenv().DanceButtonConn:Disconnect()
    getgenv().DanceButtonConn = nil
end
if getgenv().CloseButtonConn then
    getgenv().CloseButtonConn:Disconnect()
    getgenv().CloseButtonConn = nil
end

-- CREATE UI
local screenGui = Instance.new("ScreenGui")
screenGui.ResetOnSpawn = false
screenGui.Name = "DanceUI"
screenGui.Parent = game:GetService("CoreGui")

local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 120, 0, 40)
button.Position = UDim2.new(0.5, -60, 0.5, -20)
button.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
button.TextColor3 = Color3.fromRGB(255, 255, 255)
button.Text = "Play Emote"
button.Parent = screenGui

local closeButton = Instance.new("TextButton")
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -35, 0, 5)
closeButton.AnchorPoint = Vector2.new(1, 0)
closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Text = "X"
closeButton.Parent = screenGui

-- FUNCTION to play emote
local function playEmote()
    local humanoid = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChildWhichIsA("Humanoid")
    if humanoid then
        local anim = Instance.new("Animation")
        anim.AnimationId = "rbxassetid://" .. EMOTE_ID
        local track = humanoid:LoadAnimation(anim)
        track.Looped = false
        track:Play()
        task.delay(EMOTE_DURATION, function()
            if track.IsPlaying then
                track:Stop()
            end
        end)
    end
end

-- BIND buttons
getgenv().DanceButtonConn = button.MouseButton1Click:Connect(playEmote)
getgenv().CloseButtonConn = closeButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
    getgenv().DanceUI = nil
    if getgenv().DanceButtonConn then getgenv().DanceButtonConn:Disconnect() end
    if getgenv().CloseButtonConn then getgenv().CloseButtonConn:Disconnect() end
end)

getgenv().DanceUI = screenGui
